---
lab:
    title: '연습 1 - Microsoft Sentinel 환경 구성'
    module: '모듈 5 - Microsoft Sentinel 환경 구성'
---

# 모듈 5 - 랩 1 - 연습 1 - Microsoft Sentinel 환경 구성

## 랩 시나리오

여러분은 Microsoft Sentinel을 구현하는 중인 회사에서 일하는 보안 작업 분석가입니다. 비용을 최소화하고 규정 준수 규정을 충족하며 보안 팀이 일상적인 업무 책임을 수행할 수 있도록 가장 관리 가능한 환경을 제공하기 위해 회사의 요구 사항을 충족하는 Microsoft Sentinel 환경을 설정할 책임이 있습니다.


### 작업 1: Microsoft Sentinel 작업 영역 초기화

이 작업에서는 Microsoft Sentinel 작업 영역을 만듭니다.

1. WIN1 가상 머신에 Admin으로 로그인합니다. 암호로는 **Pa55w.rd**를 사용합니다.  

2. Edge 브라우저를 엽니다.

3. Edge 브라우저에서 Azure Portal https://portal.azure.com 으로 이동합니다.

4. 랩 호스팅 공급자가 제공한 **테넌트 전자 메일** 계정을 복사하여 **로그인** 대화 상자에 붙여넣은 후 **다음**을 선택합니다.

5. 랩 호스팅 공급자가 제공한 **테넌트 암호**를 복사하여 **암호 입력** 대화 상자에 붙여넣은 후 **로그인**을 선택합니다.

6. Azure Portal의 검색 창에 *Sentinel*을 입력하고 **Microsoft Sentinel**을 선택합니다.

7. **+ 만들기**를 선택합니다.

8. 그런 다음 **+ 새 작업 영역 만들기**를 선택합니다.

    >**참고:** 먼저 새 Log Analytics 작업 영역을 만듭니다.

9. 적절한 구독을 선택합니다.

10. 리소스 그룹에서 **새로 만들기** 링크를 선택하고 원하는 새 리소스 그룹 이름을 입력한 후 **확인**을 선택합니다.

11. 이름 필드의 *인스턴스 세부 정보*에 Log Analytics 작업 영역에 선택한 이름을 입력합니다.

    >**참고:** 이 이름은 Microsoft Sentinel 작업 영역 이름으로도 사용됩니다.

12. 적절한 지역을 선택합니다. 적절한 지역이 기본값으로 설정되어 있을 수도 있고, 강사가 선택해야 하는 지역을 구체적으로 알려 줄 수도 있습니다.  

13. **검토 + 만들기**를 선택합니다.

14. Log Analytics 작업 영역 만들기 영역에서 **만들기**를 선택합니다. *작업 영역에 Microsoft Sentinel 추가* 페이지에 있는 목록에 새 Log Analytics 작업 영역이 표시될 때까지 기다립니다.  1분 정도 걸릴 수 있습니다.

15. 새로 만든 작업 영역이 표시되면 선택한 다음 **추가**를 선택합니다. 몇 분 정도 걸릴 수 있습니다.

16. 새로 만든 Microsoft Sentinel 작업 영역 내를 이동하면서 사용자 인터페이스 옵션을 숙지합니다.


### 작업 2: 관심 목록 만들기

이 작업에서는 Microsoft Sentinel에서 관심 목록을 만듭니다.

1. Windows 10 화면 아래쪽의 검색 상자에 *Notepad*를 입력합니다.  결과에서 **메모장**을 선택합니다.

2. *Hostname*을 입력하고 Enter 키를 눌러 새 줄을 시작합니다.

3. 메모장의 2~6행에 다음 호스트 이름을 한 줄에 하나씩 입력합니다.

```Notepad
Host1
Host2
Host3
Host4
Host5
```

4. 메뉴에서 **파일 - 다른 이름으로 저장**을 선택하고 파일 이름을 *HighValue.csv*로 지정합니다.  그런 후에 파일 형식을 **모든 파일(*.*)** 로 변경합니다.  그리고 **저장**을 선택합니다.  PC의 경우 *문서* 폴더에 파일을 저장할 수 있습니다.

5. 메모장을 닫습니다.

6. Microsoft Sentinel의 구성 영역에서 **관심 목록** 옵션을 선택합니다.

7. 명령 모음에서 **+ 새 항목 추가**를 선택합니다.

8. 관심 목록 마법사에 다음 정보를 입력합니다.

    |일반 설정|값|
    |---|---|
    |이름|**HighValueHosts**|
    |설명|**중요 호스트**|
    |관심 목록 별칭|**HighValueHosts**|

9. **다음: 원본 >** 을 선택합니다.

10. *파일 업로드*에서 **파일 찾아보기**를 선택하고 방금 만든 *HighValue.csv* 파일을 찾습니다.

11. *SearchKey* 필드에서 **Hostname**을 선택합니다.

12. **다음: 검토 및 만들기 >** 를 선택합니다.

13. 입력한 설정을 검토하고 **만들기**를 선택합니다.

14. 화면에 관심 목록 목록이 다시 표시됩니다.

15. 새 관심 목록을 선택합니다.  오른쪽 탭에서 **Log Analytics에서 보기**를 선택합니다.

16. 이제 KQL 문에서 _GetWatchlist('HighValueHosts')를 사용하여 목록에 액세스할 수 있습니다. 참조할 열은 *Hostname*입니다.

```KQL
_GetWatchlist('HighValueHosts')
```

>**참고:** 가져오기가 완료되는 데 몇 분 정도 걸릴 수 있습니다. 다음 작업으로 진행하고 나중에 돌아와 이 명령을 실행해도 됩니다.

17. 오른쪽 위에서 'x'를 선택하여 *로그* 창을 닫고 **확인**을 클릭하여 저장하지 않은 변경 내용을 취소합니다.


### 작업 3: 위협 표시기 만들기

이 작업에서는 Microsoft Sentinel에서 표시기를 만듭니다.

1. Microsoft Sentinel의 위협 관리 영역에서 **위협 인텔리전스** 옵션을 선택합니다.

2. 명령 모음에서 **+ 새 항목 추가**를 선택합니다.

3. *유형* 드롭다운에서 사용 가능한 여러 표시기 유형을 검토합니다. **domain-name**을 선택합니다. 도메인 상자에 이니셜을 입력합니다. *fmg.com*을 예로 들 수 있습니다.

4. *위협 형식*에서 **malicious-activity**를 선택합니다.

5. *이름*에는 도메인에 사용한 것과 같은 값을 입력합니다. *fmg.com*을 예로 들 수 있습니다.

6. *유효 기간(시작)* 필드의 값을 오늘 날짜로 설정합니다.

7. **적용**을 선택합니다.

    >**참고:** 표시기가 나타나는 데 몇 분 정도 걸릴 수 있습니다.

8. 일반 영역에서 **로그** 옵션을 선택합니다. 문을 실행하려면 "항상 쿼리 표시" 옵션을 비활성화하고 *쿼리* 창을 닫아야 할 수 있습니다.

9. 다음 KQL 문을 실행합니다.

```KQL
ThreatIntelligenceIndicator
```
결과를 오른쪽으로 스크롤하여 DomainName 열을 확인합니다. 다음 KQL 문을 실행하여 DomainName 열만 표시할 수도 있습니다.  

```KQL
ThreatIntelligenceIndicator
| project DomainName
```

## 이 랩을 완료했습니다.
