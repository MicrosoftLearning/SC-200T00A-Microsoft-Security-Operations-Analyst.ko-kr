# 모듈 5 Microsoft Sentinel 환경 구성

**참고** 이 데모의 성공적인 완료는 필수 구성 요소 문서의[ 모든 단계를 ](00-prerequisites.md)완료하는 데 따라 달라집니다. 

## Microsoft Sentinel 인터페이스 살펴보기

1. [필수 구성 요소](00-prerequisites.md#deploy-azure-sentinel-workspace-for-demo-in-module-4) 섹션을 완료하는 동안 이전에 만든 Microsoft Sentinel 인터페이스로 돌아갑니다.

1. 새로 만든 Microsoft Sentinel 작업 영역 내를 이동하면서 사용자 인터페이스 옵션을 숙지합니다.

## 관심 목록 생성

이 작업에서는 관심 목록을 만듭니다.

1. 화면 아래쪽의 검색 상자에 `Notepad`를 입력합니다.  결과에서 메모장** 선택합니다**.

1. `Hostname`을 입력한 다음 새 줄을 입력합니다.

1. 행 2~6에서 다음 호스트 이름을 추가합니다.
    ```
    Host1
    Host2
    Host3
    Host4
    Host5
    ```

1. 메뉴에서 **파일 - 다른 이름으로 저장**을 선택하고 파일 이름을 `HighValue.csv`로 지정합니다.  그런 후에 파일 형식을 **모든 파일(*.*)** 로 변경합니다.  그런 다음 **저장**을 선택합니다.

1. 메모장을 닫습니다.

1. Microsoft Sentinel의 **내 관심 목록** 영역에서 **관심 목록** 옵션을 선택합니다.

1. 명령 모음에서 새로** 추가를 선택합니다**.

1. 관심 목록 마법사에서 다음을 입력합니다. 이름: HighValueHosts 설명: 고가용성 호스트 관심 목록 별칭: HighValueHosts

1. 선택, **다음: 원본 >**.

1. 방금 만든 `HighValue.csv` 파일을 찾습니다. 

1. CSV 파일이 로드되면 SearchKey 필드** 드롭다운 상자에서 **호스트 이름을** 선택합니다**.

1. 다음을 선택합니다 **. >** 검토하고 만듭니다.

1. **만들기**를 실행합니다.

1. 화면이 관심 목록 목록으로 돌아갑니다.

1. 새 관심 목록을 선택합니다.  오른쪽 탭에서 Log Analytics**에서 보기를 선택합니다**.

1. 다음 KQL 문은 결과가 표시된 상태에서 자동으로 실행됩니다.

```KQL
_GetWatchlist('HighValueHosts')
```
**가져오기** 가 완료되는 데 1분 정도 걸릴 수 있습니다.

이제 사용자 고유의 KQL 문에서 _GetWatchlist('HighValueHosts')를 사용하여 목록에 액세스할 수 있습니다. 참조할 열은 Hostname*입니다*.

## 위협 지표를 만듭니다.

이 작업에서는 표시기를 만듭니다.

1. Microsoft Sentinel의 **위협 관리** 영역에서 **위협 인텔리전스** 옵션을 선택합니다.

1. 명령 모음에서 새로** 추가를 선택합니다**.

1. {b>유형<b} 드롭다운에서 사용 가능한 여러 표시기 유형을 검토합니다.  그런 다음, do기본-name**을 선택합니다**. Do기본 상자에 이니셜을 입력합니다. 예를 들어 fmg.com.

1. 위협 유형에 대해 **+ 추가**를 선택하고 **악의적 활동**을 복사하여 필드에 붙여넣습니다.

1. 이름에 Do기본 사용되는 것과 동일한 값을 입력합니다. 예를 들어 fmg.com.

1. **** 유효 필드를 오늘 날짜로 설정합니다.

1. **적용**을 선택합니다.

**참고** 표시기가 나타나려면 1분 정도 걸릴 수 있습니다.

1. 일반 영역에서 로그** 옵션을 선택합니다**.  쿼리 창으로 이동하려면 "항상 쿼리 표시" 옵션을 사용하지 않도록 설정해야 할 수 있습니다.

1. 다음 KQL 문을 실행합니다.

```KQL
ThreatIntelligenceIndicator 
```
결과를 오른쪽으로 스크롤하여 Do기본Name 열을 표시합니다. 다음 KQL 문을 실행하여 Do기본Name 열만 볼 수도 있습니다.  

```KQL
ThreatIntelligenceIndicator 
| project DomainName
```
## 데모를 완료했습니다.